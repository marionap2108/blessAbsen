<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /blessAbsen/

    # Allow direct access to service worker files
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^firebase-messaging-sw\.js$ - [L]

    # Handle other files
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /blessAbsen/index.html [L]
</IfModule>

# Set correct headers for service worker
<Files "firebase-messaging-sw.js">
    Header set Service-Worker-Allowed "/"
    Header set Content-Type "application/javascript"
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
</Files>

# Enable CORS
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type" 